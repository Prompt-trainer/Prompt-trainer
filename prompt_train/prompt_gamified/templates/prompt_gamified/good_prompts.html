{% extends 'base.html' %}

{% block title %}
Бібліотека найкращих промптів
{% endblock %}

{% block header %}
<header class="py-4 border-bottom">
    <div class="container text-center">
        <h1 class="display-6">Бібліотека найкращих промптів</h1>
    </div>
</header>
{% endblock %}

{% block content %}
<div class="container my-4">
    <div class="row" data-masonry='{"percentPosition": true }'>
        {% for prompt in prompts %}
        <div class="col-md-3 col-sm-6 mb-3 fade-in">
            <div class="card border-primary w-100">
                <div class="card-body">
                    <h5 class="card-title">
                        Промпт #{{ prompt.id }}
                        <a tabindex="0" class="float-end" role="button" data-bs-toggle="popover"
                            data-bs-trigger="hover focus" data-bs-placement="top"
                            data-bs-title="Підказка для покращення" data-bs-content="{{ prompt.improvement_hint }}">
                            <i class="bi bi-lightbulb"></i>
                        </a>
                    </h5>
                    <p class="card-text">{{ prompt.prompt_text }}</p>
                    <p class="card-text"><strong>Оцінка:</strong> {{ prompt.rate }}</p>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center">Немає доступних промптів.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"
    integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous"
    async></script>
<script>
    const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
    const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
</script>
{% endblock %}